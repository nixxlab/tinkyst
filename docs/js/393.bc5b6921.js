"use strict";(self["webpackChunktinkyst"]=self["webpackChunktinkyst"]||[]).push([[393],{5393:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Y});var n=l(3673),r=l(2323);const t={class:"text-h3"},u=(0,n.Wm)("td",null,null,-1),s=(0,n.Wm)("td",null,"Наличка",-1),c=(0,n.Wm)("td",null,"Акции",-1),i=(0,n.Wm)("td",null,"Облигации",-1),o=(0,n.Wm)("td",null,"Фонды",-1),d=(0,n.Wm)("td",{style:{"font-weight":"bold"}},"Всего",-1),m=(0,n.Wm)("div",{class:"text-h6"}," Оценочная стоимость портфеля ",-1),b=(0,n.Wm)("td",null,"В пересчёте на Рубль РФ",-1),f={align:"right",style:{"font-weight":"bold"}},g=(0,n.Wm)("td",null,"В пересчёте на Доллар США",-1),v={align:"right",style:{"font-weight":"bold"}},h=(0,n.Wm)("td",null,"В пересчёте на Евро",-1),w={align:"right",style:{"font-weight":"bold"}};function _(e,a,l,_,W,y){const p=(0,n.up)("q-markup-table"),k=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(k,{class:"column fit q-gutter-md q-pa-md",style:{"max-width":"1000px"}},{default:(0,n.w5)((()=>[(0,n.Wm)("div",t,(0,r.zw)(e.$t("portfolio_capital")),1),(0,n.Wm)(p,{flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)("tbody",null,[(0,n.Wm)("tr",null,[u,((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.balances,((e,a)=>((0,n.wg)(),(0,n.j4)("td",{align:"right",key:a}," Активы в "+(0,r.zw)(a),1)))),128))]),(0,n.Wm)("tr",null,[s,((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.balances,((a,l)=>((0,n.wg)(),(0,n.j4)("td",{align:"right",key:l},(0,r.zw)(e.number_format.format(a.cash))+" "+(0,r.zw)(e.currencies.find((e=>e.value===l)).label),1)))),128))]),(0,n.Wm)("tr",null,[c,((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.balances,((a,l)=>((0,n.wg)(),(0,n.j4)("td",{align:"right",key:l},(0,r.zw)(e.number_format.format(a.shares))+" "+(0,r.zw)(e.currencies.find((e=>e.value===l)).label),1)))),128))]),(0,n.Wm)("tr",null,[i,((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.balances,((a,l)=>((0,n.wg)(),(0,n.j4)("td",{align:"right",key:l},(0,r.zw)(e.number_format.format(a.bonds))+" "+(0,r.zw)(e.currencies.find((e=>e.value===l)).label),1)))),128))]),(0,n.Wm)("tr",null,[o,((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.balances,((a,l)=>((0,n.wg)(),(0,n.j4)("td",{align:"right",key:l},(0,r.zw)(e.number_format.format(a.funds))+" "+(0,r.zw)(e.currencies.find((e=>e.value===l)).label),1)))),128))]),(0,n.Wm)("tr",null,[d,((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.balances,((a,l)=>((0,n.wg)(),(0,n.j4)("td",{align:"right",style:{"font-weight":"bold"},key:l},(0,r.zw)(e.number_format.format(a.cash+a.shares+a.bonds+a.funds))+" "+(0,r.zw)(e.currencies.find((e=>e.value===l)).label),1)))),128))])])])),_:1}),(0,n.Wm)("div",null,[m,(0,n.Wm)(p,{flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)("tbody",null,[(0,n.Wm)("tr",null,[b,(0,n.Wm)("td",f,(0,r.zw)(e.number_format.format(e.balance_in_rub))+" ₽",1)]),(0,n.Wm)("tr",null,[g,(0,n.Wm)("td",v,(0,r.zw)(e.number_format.format(e.balance_in_usd))+" $",1)]),(0,n.Wm)("tr",null,[h,(0,n.Wm)("td",w,(0,r.zw)(e.number_format.format(e.balance_in_eur))+" €",1)])])])),_:1})])])),_:1})}var W=l(1959),y=l(9582),p=l(7874);const k=[{label:"€",value:"EUR",name:"Евро"},{label:"₽",value:"RUB",name:"Рубль"},{label:"$",value:"USD",name:"Доллар США"}],P=(0,n.aZ)({setup(){const e=(0,y.tv)(),a=(0,p.oR)(),l=a.getters["tinkoff/accounts"],n=a.getters["tinkoff/eur_price"],r=a.getters["tinkoff/usd_price"],t=(0,W.iH)(0),u=(0,W.iH)(0),s=(0,W.iH)(0),c=(0,W.iH)({}),i=Intl.NumberFormat("ru-RU");if(l)for(var o in l.forEach((e=>{e.currencies.forEach((e=>{c.value[e.currency]||0==e.balance||(c.value[e.currency]={bonds:0,cash:0,funds:0,shares:0}),0!=e.balance&&(c.value[e.currency].cash+=e.balance)})),e.positions.forEach((e=>{switch(c.value[e.averagePositionPrice.currency]||(c.value[e.averagePositionPrice.currency]={bonds:0,cash:0,funds:0,shares:0}),e.instrumentType){case"Bond":c.value[e.averagePositionPrice.currency].bonds+=e.averagePositionPrice.value*e.balance+e.expectedYield.value;break;case"Currency":break;case"Etf":c.value[e.averagePositionPrice.currency].funds+=e.averagePositionPrice.value*e.balance+e.expectedYield.value;break;case"Stock":c.value[e.averagePositionPrice.currency].shares+=e.averagePositionPrice.value*e.balance+e.expectedYield.value;break}}))})),c.value){let e=c.value[o],a="EUR"==o?1:"USD"==o?r/n:1/n,l="EUR"==o?n:"USD"==o?r:1,i="EUR"==o?n/r:"USD"==o?1:1/r;t.value+=a*(e.cash+e.shares+e.bonds+e.funds),u.value+=l*(e.cash+e.shares+e.bonds+e.funds),s.value+=i*(e.cash+e.shares+e.bonds+e.funds)}else e.push("/settings");return{balance_in_eur:t,balance_in_rub:u,balance_in_usd:s,balances:c,currencies:k,eur_price:n,number_format:i,usd_price:r}}});var z=l(4379),j=l(481),H=l(7518),U=l.n(H);P.render=_;const Y=P;U()(P,"components",{QPage:z.Z,QMarkupTable:j.Z})}}]);