"use strict";(self["webpackChunktinkyst"]=self["webpackChunktinkyst"]||[]).push([[542],{7542:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var l=n(3673),a=n(2323),u=n(8880);const i={class:"text-h3"},s={key:0,style:{width:"100%"}};function o(e,t,n,o,r,d){const f=(0,l.up)("q-input"),c=(0,l.up)("q-btn"),_=(0,l.up)("q-separator"),p=(0,l.up)("q-item-label"),k=(0,l.up)("q-badge"),w=(0,l.up)("q-item-section"),m=(0,l.up)("q-item"),g=(0,l.up)("q-list"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{class:"column content-start fit items-start justify-start q-gutter-md q-pa-md",style:{"max-width":"1000px"}},{default:(0,l.w5)((()=>[(0,l.Wm)("div",i,(0,a.zw)(e.$t("settings")),1),(0,l.Wm)(f,{filled:"",error:!0!==e.settings_validation,"error-message":e.settings_validation.toString(),loading:null===e.api_token_verification&&null!==e.api_token_sent,label:e.$t("api_token"),style:{width:"100%"},type:"textarea",modelValue:e.api_token,"onUpdate:modelValue":t[1]||(t[1]=t=>e.api_token=t)},null,8,["error","error-message","loading","label","modelValue"]),(0,l.Wm)(c,{onClick:e.update_settings,color:"primary",disable:!0!==e.settings_validation,onKeydown:(0,u.D2)(e.update_settings,["enter"]),label:e.$t("update")},null,8,["onClick","disable","onKeydown","label"]),e.accounts?((0,l.wg)(),(0,l.j4)("div",s,[(0,l.Wm)(_),(0,l.Wm)("h5",null,(0,a.zw)(e.$t("data_loaded")),1),(0,l.Wm)(g,{bordered:"",separator:"",style:{width:"100%"}},{default:(0,l.w5)((()=>[e.accounts?((0,l.wg)(),(0,l.j4)(m,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("accounts")),1)])),_:1}),(0,l.Wm)(p,{caption:"",class:"q-gutter-xs"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.accounts,(t=>((0,l.wg)(),(0,l.j4)(k,{rounded:"",color:"secondary",label:e.$t(t.type+"_account"),"text-color":"dark",key:t.id},null,8,["label"])))),128))])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("currencies_market")),1)])),_:1}),(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.currencies?e.currencies.length:0)+" "+(0,a.zw)(e.$t("pc")),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("shares_market")),1)])),_:1}),(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.shares?e.shares.length:0)+" "+(0,a.zw)(e.$t("pc")),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("bonds_market")),1)])),_:1}),(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.bonds?e.bonds.length:0)+" "+(0,a.zw)(e.$t("pc")),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("funds_market")),1)])),_:1}),(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.funds?e.funds.length:0)+" "+(0,a.zw)(e.$t("pc")),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("exchange_rate"))+" ₽/€",1)])),_:1}),(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.eur_price),1)])),_:1})])),_:1})])),_:1}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.$t("exchange_rate"))+" ₽/$",1)])),_:1}),(0,l.Wm)(p,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.usd_price),1)])),_:1})])),_:1})])),_:1})])),_:1})])):(0,l.kq)("",!0)])),_:1})}var r=n(1959),d=n(5948),f=n(7874);const c=(0,l.aZ)({setup(){const e=(0,d.QT)({useScope:"global"}),t=(0,f.oR)(),n=(0,r.iH)(t.getters["tinkoff/accounts"]),a=(0,r.iH)(t.getters["tinkoff/api_token"]),u=(0,r.iH)(null),i=(0,r.iH)(null),s=(0,r.iH)(t.getters["tinkoff/bonds"]),o=(0,r.iH)(t.getters["tinkoff/currencies"]),c=(0,r.iH)(t.getters["tinkoff/eur_price"]),_=(0,r.iH)(t.getters["tinkoff/funds"]),p=(0,r.iH)(t.getters["tinkoff/shares"]),k=(0,r.iH)(t.getters["tinkoff/usd_price"]),w=(0,l.Fl)((()=>a.value?a.value.length<80?e.t("wrong_token"):a.value!==u.value||!1!==i.value||e.t("wrong_token"):e.t("no_token")));function m(){t.commit("tinkoff/api_token",a.value),u.value=a.value,i.value=null,t.dispatch("tinkoff/get_accounts",{spinner:!1}).then((e=>{n.value=t.getters["tinkoff/accounts"]})).then((e=>{i.value=!0,t.dispatch("tinkoff/get_bonds",{spinner:!1}).then((e=>{s.value=t.getters["tinkoff/bonds"]})),t.dispatch("tinkoff/get_currencies",{spinner:!1}).then((e=>{o.value=t.getters["tinkoff/currencies"]})),t.dispatch("tinkoff/get_funds",{spinner:!1}).then((e=>{_.value=t.getters["tinkoff/funds"]})),t.dispatch("tinkoff/get_shares",{spinner:!1}).then((e=>{p.value=t.getters["tinkoff/shares"]})),t.dispatch("tinkoff/get_eur_price",{spinner:!1}).then((e=>{c.value=t.getters["tinkoff/eur_price"]})),t.dispatch("tinkoff/get_usd_price",{spinner:!1}).then((e=>{k.value=t.getters["tinkoff/usd_price"]}))})).catch((e=>{i.value=!1,n.value=null,s.value=null,o.value=null,value=null,_.value=null,p.value=null,k.value=null,t.commit("tinkoff/clear")}))}return!0===w.value&&(n.value?i.value=!0:m()),{accounts:n,api_token:a,api_token_sent:u,api_token_verification:i,bonds:s,currencies:o,eur_price:c,funds:_,settings_validation:w,shares:p,update_settings:m,usd_price:k}}});var _=n(4379),p=n(6112),k=n(522),w=n(5869),m=n(7011),g=n(3414),h=n(2035),v=n(2350),W=n(9721),b=n(7518),z=n.n(b);c.render=o;const $=c;z()(c,"components",{QPage:_.Z,QInput:p.Z,QBtn:k.Z,QSeparator:w.Z,QList:m.Z,QItem:g.Z,QItemSection:h.Z,QItemLabel:v.Z,QBadge:W.Z})}}]);